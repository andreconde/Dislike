<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>

	function createArrayOfSuggestions(m) {

		var suggestions = new Array();		

		for ( var i = 0; i < m.length; i++ ) {
			var suggestion = eval(m[i]);
			suggestions[i] = suggestion[0];
		}

		console.log(suggestions);

		return suggestions;

	}

	function retrieve(url) {

		$.ajax({
			url: url,
			dataType: 'jsonp',
			data: {
			q: $( "#tags" ).val(),
			nolabels: 't',
			client: 'psy',
			ds: ''
			},
			success: function(data) {
				var myMap = eval(data[1]);	
				//console.log(myMap);
				var suggestions = createArrayOfSuggestions(myMap);
				console.log(suggestions);	
				
				$( "#tags" ).autocomplete({
            				source: suggestions
        			});		
			
			}
		}); 
 
	}	

	function auto_complete_text(evt) {
		var url = 'http://suggestqueries.google.com/complete/search';
		retrieve(url);
	}

    </script>
</head>
<body>
 
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" onkeyup="auto_complete_text()" />
</div>
 
 
</body>
</html>
